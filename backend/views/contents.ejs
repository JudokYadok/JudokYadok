<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/images/logo.png" sizes="16x16" type="image/png">
    <title>주독야독</title>
    <style>
        #nav {
            background-color: rgba(253, 187, 187, 0.4);
            width: 300px;
            height: 100%;
            float: left;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow-y: auto;
        }

        #section {
            max-width: calc(100% - 340px);
            /* 화면 전체 너비에서 왼쪽 네비게이션 바의 너비를 뺀 값 */
            height: 500px;
            text-align: start;
            margin-right: 40px;
            margin-top: 15px;
            flex: 1;
            overflow-x: hidden;
            /* 가로 스크롤 제어 */
            overflow-y: auto;
            /* 수직 스크롤 유지 */
        }

        #btn {
            max-width: calc(100% - 340px);
            margin-top: 30px;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-left: 300px;
        }

        .slide {
            display: none;
        }

        @font-face {
            font-family: 'dongle';
            src: local('dongle'), url('/Users/parkhyejeong/Documents/font/dongle.ttf') format('ttf');
        }

        body {
            font-family: 'dongle', Arial, sans-serif;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
    </style>
</head>

<body>
    <div
        style="width: 100%; height: 30%; background-color: rgba(244, 244, 244, 0.5); padding-top: 10px; padding-bottom: 10px; display: flex; justify-content: space-between; align-items: center;">
        <div style="margin-left: 10px; display: flex; align-items: center;">
            <img src="/images/logo.png" alt="주독야독" width="50dp" height="50dp" style="margin-right: 10px;">
            <a class="navbar-brand" href="/admin/"
                style="text-decoration-line: none; color: black; font-size: 36px; font-weight: bold;"
                onmouseover="this.style.color='gray';" onmouseout="this.style.color='black';">주독야독</a>
            <span style="margin: 0 30px;"></span>

            <!-- 링크 - 임시 설정 -->
            <a class="navbar-brand" href="/admin/users"
                style="text-decoration-line: none; color: black; font-size: 18px; font-weight: bold;"
                onmouseover="this.style.color='gray'; this.style.textDecoration='underline'; this.style.textDecorationColor='#FDBBBB';"
                onmouseout="this.style.color='black'; this.style.textDecoration='none';"
                onfocus="this.style.textDecoration='underline';" onblur="this.style.textDecoration='none';">회원관리</a>
            <span style="margin: 0 10px;"></span>
            <a class="navbar-brand" href="/admin/text"
                style="text-decoration-line: none; color: black; font-size: 18px; font-weight: bold; text-decoration: underline; text-decoration-color: #FDBBBB;"
                onmouseover="this.style.color='gray'; this.style.textDecoration='none';"
                onmouseout="this.style.color='black'; this.style.textDecoration='underline'; this.style.textDecorationColor='#FDBBBB';"
                onfocus="this.style.textDecoration='none';" onblur="this.style.textDecoration='underline';">지문관리</a>
            <span style="margin: 0 10px;"></span>
            <a class="navbar-brand" href="/admin/feedback"
                style="text-decoration-line: none; color: black; font-size: 18px; font-weight: bold;"
                onmouseover="this.style.color='gray'; this.style.textDecoration='underline'; this.style.textDecorationColor='#FDBBBB';"
                onmouseout="this.style.color='black'; this.style.textDecoration='none';"
                onfocus="this.style.textDecoration='underline';" onblur="this.style.textDecoration='none';">피드백 관리</a>
            <span style="margin: 0 10px;"></span>
            <a class="navbar-brand" href="/admin/ai"
                style="text-decoration-line: none; color: black; font-size: 18px; font-weight: bold;"
                onmouseover="this.style.color='gray'; this.style.textDecoration='underline'; this.style.textDecorationColor='#FDBBBB';"
                onmouseout="this.style.color='black'; this.style.textDecoration='none';"
                onfocus="this.style.textDecoration='underline';" onblur="this.style.textDecoration='none';">AI 관리</a>
            <span style="margin: 0 30px;"></span>
        </div>

        <button onclick="window.location.href = '/admin/logout';"
            style="border-style: solid; font-size: 20px; font-weight: bold; background-color: white; border-width: 2px; border-color: black; border-radius: 30px; width: 111px; height: 45px; margin-right: 10px;"
            onmouseover="this.style.backgroundColor='#FDBBBB'; this.style.color='black';"
            onmouseout="this.style.backgroundColor='white'; this.style.color='black';">로그아웃</button>
    </div>

    <div id="nav">
        <ul style="padding: 0; height: 90vh; overflow-y: auto;">
            <% for (var i=0; i < text_list.length; i++) { %>
                <li style="list-style-type: none; margin: 10px; padding: 30px; background-color: white; border-radius: 30px; border-color: #FDBBBB; border-width: 3px; border-style: solid;"
                    onmouseover="this.style.backgroundColor='rgba(253, 187, 187, 0.4)';"
                    onmouseout="this.style.backgroundColor='white';">
                    <a style="text-decoration-line: none; color: black; font-size: 20px; font-weight: bold;"
                        class="dropdown-item" href="/admin/text/<%= text_list[i].text_id %>">
                        <%= text_list[i].title %>
                    </a>
                </li>
                <% } %>

                    <li style="list-style-type: none; margin: 10px; padding: 10px; background-color: white; border-radius: 30px; border-color: #FDBBBB; border-width: 3px; border-style: solid;"
                        onmouseover="this.style.backgroundColor='rgba(253, 187, 187, 0.4)';"
                        onmouseout="this.style.backgroundColor='white';">
                        <a style="display: flex; align-items: center; justify-content: center; text-decoration-line: none; color: black; font-size: 70px; font-weight: bold;"
                            class="dropdown-item" href="/admin/text/new">
                            +
                        </a>
                    </li>
        </ul>
    </div>

    <div id="section">
        <div style="display: flex; align-items: start; justify-content: start;">
            <pre style=" font-size: 20px; line-height: 1.5; word-break: normal; white-space: pre-wrap;"><%= text_contents %></pre>
        </div>

        <!-- 여백 -->
        <div style="margin: 50px; align-items: center; justify-content: center;"></div>
    </div>

    <div id="btn">
        <button type="submit" onclick="confirmUpdate('<%= text_id %>');"
            style="min-width: 300px; height: 40px; font-weight: bold; border-style: solid; border-radius: 30px; border-color: #FDBBBB; border-width: 3px; background-color: rgba(253, 187, 187, 0.4); font-size: 20px; color: black; margin-right: 10px;"
            onmouseover="this.style.backgroundColor='white'; this.style.color='#FDBBBB';"
            onmouseout="this.style.backgroundColor='rgba(253, 187, 187, 0.4)'; this.style.color='black';">수정</button>

        <button type="submit" onclick="confirmDelete('<%= text_id %>');"
            style="min-width: 300px; height: 40px; font-weight: bold; border-style: solid; border-radius: 30px; border-color: #FDBBBB; border-width: 3px; background-color: rgba(253, 187, 187, 0.4); font-size: 20px; color: black; margin-left: 10px;"
            onmouseover="this.style.backgroundColor='white'; this.style.color='#FDBBBB';"
            onmouseout="this.style.backgroundColor='rgba(253, 187, 187, 0.4)'; this.style.color='black';">삭제</button>
    </div>

    </span>
</body>

<script>
    function confirmUpdate(text_id) {
        var confirmation = confirm("내용이 수정됩니다. 계속 진행하시겠습니까?");

        if (confirmation) {
            window.location.href = '/admin/text/new/' + text_id;
        }
    }

    function confirmDelete(text_id) {
        var confirmation = confirm("정말로 삭제하시겠습니까?");

        if (confirmation) {
            fetch('/admin/text/' + text_id, {
                method: 'DELETE'
            })
            .then(response => {
                console.log(response.ok)
                if (response.ok) {
                    window.location.href = '/admin/text';
                } else {
                    console.error('삭제에 실패했습니다.');
                }
            })
            .catch(error => {
                console.error('네트워크 오류:', error);
            });
        }
    }
</script>

</html>